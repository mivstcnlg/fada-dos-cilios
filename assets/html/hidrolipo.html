<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Anamnese Hidrolipoclasia Não Aspirativa - Fada dos Cílios</title>
  <link rel="stylesheet" href="../css/stylehidrolipo.css">

</head>

<body>

  <header>
    <h1>Fada dos Cílios</h1>

    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="cilios.html">Extensão de Cílios</a></li>
        <li><a href="orofacial.html">Harmonização Orofacial</a></li>
        <li><a href="hidrolipo.html">Hidrolipoclasia Não Aspirativa</a></li>
      </ul>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-content">
      <h2>Hidrolipoclasia Não Aspirativa</h2>
    </div>
  </section>

  <div class="form-container">
    <h2>Anamnese Hidrolipoclasia Não Aspirativa</h2>
    <p>A hidrolipoclasia não aspirativa, também conhecida como hidrolipoclasia ultrassônica, é um procedimento estético
      que visa reduzir a gordura localizada e as medidas do corpo.</p>
    <br></br>
    <form action="hidrolipo.html" method="post">

      <div class="form-section">
        <h3>Identificação</h3>
        <div class="form-group">
          <label for="cpf">CPF:</label>
          <input type="text" id="cpf" name="cpf" maxlength="14" required placeholder="123.456.789-00"
            pattern="\d{3}\.\d{3}\.\d{3}-\d{2}">
        </div>
        <div class="form-group">
          <label for="paciente">Paciente:</label>
          <input type="text" id="paciente" name="paciente" required>
        </div>
        <div class="form-group">
          <label for="profissao">Profissão:</label>
          <input type="text" id="profissao" name="profissao" required>
        </div>
        <div class="form-group">
          <label for="data-nascimento">Data de Nascimento:</label>
          <input type="date" id="data-nascimento" name="data_nascimento" required>
        </div>
        <div class="form-group">
          <label>Sexo:</label>
          <div class="radio-group">
            <label><input type="radio" name="sexo" value="Masculino" required> Masculino</label>
            <label><input type="radio" name="sexo" value="Feminino" required> Feminino</label>
            <label><input type="radio" name="sexo" value="Outro" required> Outro</label>
          </div>
        </div>
        <div class="form-group">
          <label for="endereco">Endereço:</label>
          <input type="text" id="endereco" name="endereco" required>
        </div>
        <div class="form-group">
          <label for="cidade">Cidade:</label>
          <select id="cidade" name="cidade" required>
            <option value="">Selecione</option>
            <option value="São Paulo">São Paulo</option>
            <option value="Rio de Janeiro">Rio de Janeiro</option>
            <option value="Belo Horizonte">Belo Horizonte</option>
            <option value="Curitiba">Curitiba</option>
          </select>
        </div>
        <div class="form-group">
          <label for="telefone">Telefone:</label>
          <input type="text" id="telefone" name="telefone" maxlength="15" required placeholder="(XX) XXXXX-XXXX">
        </div>
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
          <label for="indicado-por">Indicado por:</label>
          <input type="text" id="indicado-por" name="indicado_por">
        </div>
      </div>

      <div class="form-section">
        <h3>Anamnese</h3>
        <div class="form-group">
          <label>QP (Queixa Principal):</label>
          <div class="checkbox-group">
            <label><input type="radio" name="queixa-principal" value="Não"> Não</label>
            <label><input type="radio" name="queixa-principal" value="Sim"> Sim</label>
            <input type="text" id="qp" name="qp" placeholder="Especifique">
          </div>
        </div>

        <div class="form-group">
          <label>Faz uso de medicamentos contiuo:</label>
          <div class="checkbox-group">
            <label><input type="radio" name="medicamento_continuo" value="Não"> Não</label>
            <label><input type="radio" name="medicamento_continuo" value="Sim"> Sim</label>
            <input type="text" id="medicamentos" name="medicamentos" placeholder="Especifique">
          </div>
        </div>

        <div class="form-group">
          <label>HF (Historico Familiar):</label>
          <div class="checkbox-group">
            <label><input type="radio" name="historico_familiar" value="Não"> Não</label>
            <label><input type="radio" name="historico_familiar" value="Sim"> Sim</label>
            <input type="text" id="hf" name="hf" placeholder="Especifique">
          </div>
        </div>

        <div class="form-group">
          <label>HPP (Historico Pregressa Pessoal):</label>
          <div class="checkbox-group">
            <label><input type="radio" name="historico_pregressa_pessoal" value="Não"> Não</label>
            <label><input type="radio" name="historico_pregressa_pessoal" value="Sim"> Sim</label>
            <input type="text" id="hpp" name="hpp" placeholder="Especifique">
          </div>
        </div>

        <div class="form-group">
          <label>Antecedentes oncológico:</label>
          <div class="checkbox-group">
            <label><input type="radio" name="oncologia" value="Não"> Não</label>
            <label><input type="radio" name="oncologia" value="Sim"> Sim</label>
            <input type="text" id="onco" name="onco" placeholder="Especifique">
          </div>
        </div>

        <div class="form-group">
          <label>Possui Diabete:</label>
          <div class="checkbox-group">
            <label><input type="radio" name="diabete" value="Não"> Não</label>
            <label><input type="radio" name="diabete" value="Sim"> Sim</label>
          </div>
        </div>

        <div class="form-group">
          <label>Hipertensão ou Hipotensão:</label>
          <div class="checkbox-group">
            <label><input type="radio" name="hipotensao_hipotensao" value="Não"> Não</label>
            <label><input type="radio" name="hipotensao_hipotensao" value="Sim"> Sim</label>
          </div>
        </div>

        <div class="form-group">
          <label>Problema Circulatório:</label>
          <div class="checkbox-group">
            <label><input type="radio" name="problema-circular" value="Não"> Não</label>
            <label><input type="radio" name="problema-circular" value="Sim"> Sim</label>
            <input type="text" id="problema-circulatorio" name="problema-circulatorio" placeholder="Especifique">
          </div>
        </div>

        <div class="form-group">
          <label>Alergias:</label>
          <div class="checkbox-group">
            <label><input type="radio" name="alergia-qual" value="Não"> Não</label>
            <label><input type="radio" name="alergia-qual" value="Sim"> Sim</label>
            <input type="text" id="alergias" name="alergias" placeholder="Especifique">
          </div>
        </div>

        <div class="form-group">
          <label>Gestante:</label>
          <div class="checkbox-group">
            <label><input type="radio" name="tempo_gestante" value="Não"> Não</label>
            <label><input type="radio" name="tempo_gestante" value="Sim"> Sim</label>
            <input type="text" id="gestante" name="gestante" placeholder="Especifique">
          </div>
        </div>

        <div class="form-group">
          <label>Faz uso de anticoncepcional:</label>
          <div class="checkbox-group">
            <label><input type="radio" name="anticoncepcional" value="Não"> Não</label>
            <label><input type="radio" name="anticoncepcional" value="Sim"> Sim</label>
          </div>
        </div>

      </div>

      <div class="form-section">
        <h3>Contato de Emergência</h3>
        <div class="form-group">
          <label for="emergencia-nome">Nome:</label>
          <input type="text" id="emergencia-nome" name="emergencia_nome" required>
        </div>
        <div class="form-group">
          <label for="emergencia-telefone">Telefone/Celular:</label>
          <input type="text" id="emergencia-telefone" name="emergencia_telefone" required>
        </div>
      </div>

      <div class="form-section">
        <h3>Termo de Responsabilidade</h3>
        <div class="form-group">
          <label>Você se compromete a seguir as orientações pós-procedimento?</label>
          <div class="checkbox-group">
            <label><input type="radio" name="compromisso_orientacoes" value="Sim"> Sim</label>
            <label><input type="radio" name="compromisso_orientacoes" value="Não"> Não</label>
          </div>
        </div>

        <div class="form-group">
          <label for="data-termo">Data:</label>
          <input type="date" id="data-termo" name="data_termo" required>
        </div>

        <div class="form-group">
          <label for="assinatura">Assinatura do Paciente:</label>
          <input type="text" id="assinatura" name="assinatura" required placeholder="Digite seu nome completo">
        </div>

        <div class="form-group">
          <label for="termo-concordo">
            <input type="checkbox" id="termo-concordo" name="termo_concordo" required>
            Declaro que li e concordo com as informações acima
          </label>
        </div>
      </div>

      <button type="submit" class="submit-btn">Enviar Formulário</button>
    </form>
  </div>

  <footer>
    <p>&copy; 2024 Fada dos Cílios. Todos os direitos reservados.</p>
    <div class="social-links">
      <a href="#" aria-label="Facebook">Facebook</a> |
      <a href="#" aria-label="Instagram">Instagram</a> |
      <a href="#" aria-label="WhatsApp">WhatsApp</a>
    </div>
  </footer>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script>
    function formatCpf(cpfInput) {
      let value = cpfInput.value.replace(/\D/g, ""); // Remove todos os caracteres não numéricos
      value = value.replace(/(\d{3})(\d)/, "$1.$2"); // Adiciona o ponto após os 3 primeiros números
      value = value.replace(/(\d{3})(\d)/, "$1.$2"); // Adiciona o ponto após os próximos 3 números
      value = value.replace(/(\d{3})(\d{2})$/, "$1-$2"); // Adiciona o hífen antes dos 2 últimos números
      cpfInput.value = value; // Atualiza o campo
    }

    function formatPhone(telefoneInput) {
      let value = telefoneInput.value.replace(/\D/g, ""); // Remove caracteres não numéricos
      value = value.replace(/(\d{2})(\d)/, "($1) $2"); // Formata o DDD
      value = value.replace(/(\d{5})(\d)/, "$1-$2"); // Adiciona o hífen após o 5º dígito
      telefoneInput.value = value; // Atualiza o campo
    }

    function showSuccessPopup() {
      alert("Formulário enviado com sucesso!"); // Exibe a mensagem de sucesso
    }

    function checkCpfExists(cpf) {
      return localStorage.getItem(cpf) !== null; // Verifica se os dados do CPF já estão armazenados
    }

    function fillFormWithData(cpf) {
      const userData = JSON.parse(localStorage.getItem(cpf)); // Recupera os dados do CPF
      document.getElementById("paciente").value = userData.paciente;
      document.getElementById("profissao").value = userData.profissao;
      document.getElementById("data-nascimento").value = userData.dataNascimento;
      document.getElementById("telefone").value = userData.telefone;
      document.getElementById("email").value = userData.email;
      document.getElementById("endereco").value = userData.endereco;
      document.getElementById("cidade").value = userData.cidade;
    }

    function saveFormData() {
      const formData = {
        paciente: document.getElementById("paciente").value,
        profissao: document.getElementById("profissao").value,
        dataNascimento: document.getElementById("data-nascimento").value,
        telefone: document.getElementById("telefone").value,
        email: document.getElementById("email").value,
        endereco: document.getElementById("endereco").value,
        cidade: document.getElementById("cidade").value
      };
      localStorage.setItem(document.getElementById("cpf").value.replace(/\D/g, ""), JSON.stringify(formData)); // Armazena os dados no localStorage
    }

    function handleFormSubmit() {
      const cpfInput = document.getElementById("cpf").value.replace(/\D/g, ""); // Limpa o CPF
      if (!checkCpfExists(cpfInput)) {
        saveFormData(); // Salva os dados se o CPF não existir
      }
      showSuccessPopup(); // Exibe a mensagem de sucesso
      document.getElementById("form").submit(); // Submete o formulário
    }

    function handleCpfBlur() {
      const cpfValue = document.getElementById("cpf").value.replace(/\D/g, ""); // Limpa o CPF
      if (checkCpfExists(cpfValue)) {
        alert("Este CPF já foi registrado. Os dados serão preenchidos automaticamente.");
        fillFormWithData(cpfValue); // Preenche os dados automaticamente
      }
    }

    // Chamadas diretas das funções
    window.onload = function () {
      const cpfInput = document.getElementById("cpf");
      const telefoneInput = document.getElementById("telefone");
      cpfInput.oninput = () => formatCpf(cpfInput); // Formata o CPF enquanto digita
      telefoneInput.oninput = () => formatPhone(telefoneInput); // Formata o telefone enquanto digita

      const cpfValue = cpfInput.value.replace(/\D/g, "");
      if (checkCpfExists(cpfValue)) {
        fillFormWithData(cpfValue); // Preenche os dados automaticamente se o CPF já existir
      }

      // Submissão do formulário
      const form = document.getElementById("form");
      form.onsubmit = function (e) {
        e.preventDefault(); // Previne o comportamento padrão de submit
        handleFormSubmit(); // Executa a função de submissão personalizada
      };

      // Verificação do CPF no campo blur
      cpfInput.onblur = handleCpfBlur; // Preenche os dados automaticamente quando perde o foco
    };
  </script>


</body>

</html>
<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Anamnese Extensão de Cílios - Fada dos Cílios</title>
    <link rel="stylesheet" href="../css/stylecilios.css">
</head>

<body>

    <header>
        <h1>Fada dos Cílios</h1>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="cilios.html">Extensão de Cílios</a></li>
                <li><a href="orofacial.html">Harmonização Orofacial</a></li>
                <li><a href="hidrolipo.html">Hidrolipoclasia Não Aspirativa</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h2>Extensão de Cílios</h2>
        </div>
    </section>

    <div class="form-container">
        <h2>Ficha de Anamnese</h2>
        <p>A extensão de cílios, também conhecida como alongamento de cílios, é um procedimento estético que consiste na
            colagem de fios sintéticos ou de seda nos cílios naturais, com o objetivo de dar mais volume, realce e
            definição ao olhar.</p>
        <br></br>
        <form id="form" action="cilios.html" method="post">
            <div class="form-section">
                <h3>Identificação</h3>
                <div class="form-group">
                    <label for="cpf">CPF:</label>
                    <input type="text" id="cpf" name="cpf" maxlength="14" required placeholder="123.456.789-00"
                        pattern="\d{3}\.\d{3}\.\d{3}-\d{2}">
                </div>
                <div class="form-group">
                    <label for="paciente">Paciente:</label>
                    <input type="text" id="paciente" name="paciente" required>
                </div>
                <div class="form-group">
                    <label for="profissao">Profissão:</label>
                    <input type="text" id="profissao" name="profissao" required>
                </div>
                <div class="form-group">
                    <label for="data-nascimento">Data de Nascimento:</label>
                    <input type="date" id="data-nascimento" name="data_nascimento" required>
                </div>
                <div class="form-group">
                    <label>Sexo: </label>
                    <div class="radio-group">
                        <label><input type="radio" name="sexo" value="Masculino" required> Masculino</label>
                        <label><input type="radio" name="sexo" value="Feminino" required> Feminino</label>
                        <label><input type="radio" name="sexo" value="Outro" required> Outro</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="endereco">Endereço:</label>
                    <input type="text" id="endereco" name="endereco" required>
                </div>
                <div class="form-group">
                    <label for="cidade">Cidade:</label>
                    <select id="cidade" name="cidade" required>
                        <option value="">Selecione</option>
                        <option value="São Paulo">São Paulo</option>
                        <option value="Rio de Janeiro">Rio de Janeiro</option>
                        <option value="Belo Horizonte">Belo Horizonte</option>
                        <option value="Curitiba">Curitiba</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="telefone">Telefone:</label>
                    <input type="text" id="telefone" name="telefone" maxlength="15" required
                        placeholder="(XX) XXXXX-XXXX">
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="indicado-por">Indicado por:</label>
                    <input type="text" id="indicado-por" name="indicado_por">
                </div>
            </div>

            <div class="form-section">
                <h3>Avaliação</h3>
                <div class="form-group">
                    <label>Já fez extensão de cílios?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="fez_extensao" value="Não"> Não</label>
                        <label><input type="radio" name="fez_extensao" value="Sim"> Sim</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Gestante?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="gestante" value="Não"> Não</label>
                        <label><input type="radio" name="gestante" value="Sim"> Sim</label>
                        <input type="text" id="tmp-gestacao" name="tmp-gestacao" placeholder="Especifique">
                    </div>
                </div>
                <div class="form-group">
                    <label>Fez algum procedimento recentemente nos olhos?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="procedimentos_olhos" value="Não"> Não</label>
                        <label><input type="radio" name="procedimentos_olhos" value="Sim"> Sim</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Possui alergia à esmaltes/cosméticos/cianoacrilato?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="alergias" value="Não"> Não</label>
                        <label><input type="radio" name="alergias" value="Sim"> Sim</label>
                        <input type="text" id="alergiacilios-qual" name="alergiacilios_qual" placeholder="Especifique">
                    </div>
                </div>
                <div class="form-group">
                    <label>Possui problema de tireoide?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="tireoide" value="Não"> Não</label>
                        <label><input type="radio" name="tireoide" value="Sim"> Sim</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Possui algum problema respiratório?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="problema_respiratorio" value="Não"> Não</label>
                        <label><input type="radio" name="problema_respiratorio" value="Sim"> Sim</label>
                        <input type="text" id="problema-respiratorio-qual" name="problema_respiratorio_qual"
                            placeholder="Especifique">
                    </div>
                </div>
                <div class="form-group">
                    <label>Faz uso de lentes de contato?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="lentes" value="Não"> Não</label>
                        <label><input type="radio" name="lentes" value="Sim"> Sim</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Possui glaucoma/blefarite/algum problema ocular?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="problema_ocular" value="Não"> Não</label>
                        <label><input type="radio" name="problema_ocular" value="Sim"> Sim</label>
                        <input type="text" id="problema-ocular-qual" name="problema_ocular_qual"
                            placeholder="Especifique">
                    </div>
                </div>
                <div class="form-group">
                    <label>Está em tratamento oncológico?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="tratamento_oncologico" value="Não"> Não</label>
                        <label><input type="radio" name="tratamento_oncologico" value="Sim"> Sim</label>
                        <input type="text" id="trat-ocular-qual" name="trat-ocular-qual"
                            placeholder="Qual?">
                    </div>
                </div>
                <div class="form-group">
                    <label>Dorme de lado?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="dorme_lado" value="Não"> Não</label>
                        <label><input type="radio" name="dorme_lado" value="Sim"> Sim</label>
                        <input type="text" id="dorme-lado-qual" name="dorme_lado_qual" placeholder="Qual?">
                    </div>
                </div>
                <div class="form-group">
                    <label>Existe algum problema que julgue ser necessário informar ao profissional antes do
                        procedimento?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="info-extra" value="Não"> Não</label>
                        <label><input type="radio" name="info-extra" value="Sim"> Sim</label>
                        <input type="text" id="informacao-extra" name="informacao-extra" 
                            placeholder="Especifique">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h3>Ficha Técnica:</h3>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="tipo" value="Fio"> Fio a Fio</label>
                    <label><input type="checkbox" name="tipo" value="Volume Russo"> Volume Russo</label>
                    <label><input type="checkbox" name="tipo" value="Hibrido"> Hibrido</label>
                    <label><input type="checkbox" name="tipo" value="Megavolume"> Megavolume</label>
                </div>
                <div class="form-group">
                    <label for="mapping">Mapping:</label>
                    <input type="text" id="mapping" name="mapping" required>
                </div>
                <div class="form-group">
                    <label for="estilo">Estilo:</label>
                    <input type="text" id="estilo" name="estilo" required>
                </div>
                <div class="form-group">
                    <label for="modelo">Modelo de Fios:</label>
                    <input type="text" id="modelo" name="modelo" required>
                </div>
                <div class="form-group">
                    <label for="espessura">Espessura:</label>
                    <input type="text" id="espessura" name="espessura" required>
                </div>
                <div class="form-group">
                    <label for="curvatura">Curvatura:</label>
                    <input type="text" id="curvatura" name="curvatura" required>
                </div>
                <div class="form-group">
                    <label for="adesivo">Adesivo:</label>
                    <input type="text" id="adesivo" name="adesivo" required>
                </div>
                <h3>Lifting:</h3>
                <div class="form-group">
                    <label for="marca">Marca:</label>
                    <input type="text" id="marca" name="marca" required>
                </div>
                <div class="form-group">
                    <label for="moldes">Pads/Moldes:</label>
                    <input type="text" id="moldes" name="moldes" required>
                </div>
                <div class="form-group">
                    <label for="tempo">Tempo de Ação:</label>
                    <input type="text" id="tempo" name="tempo" required>
                </div>
                <div class="form-group">
                    <label>Tintura:</label>
                    <div class="checkbox-group">
                        <label for="tintura-sim"><input type="radio" id="tintura-sim" name="tintura" value="Sim">
                            Sim</label>
                        <label for="tintura-nao"><input type="radio" id="tintura-nao" name="tintura" value="Não">
                            Não</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="cor">Cor:</label>
                    <input type="color" id="cor" name="cor">
                </div>
            </div>
            <div class="form-section">
                <h3>Contato de Emergência</h3>
                <div class="form-group">
                    <label for="emergencia-nome">Nome:</label>
                    <input type="text" id="emergencia-nome" name="emergencia_nome" required>
                </div>
                <div class="form-group">
                    <label for="emergencia-telefone">Telefone/Celular:</label>
                    <input type="text" id="emergencia-telefone" name="emergencia_telefone" required>
                </div>
            </div>
            <div class="form-section">
                <h3>Termo de Responsabilidade</h3>
                <div class="form-group">
                    <label>Você se compromete a seguir as orientações pós-procedimento?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="compromisso_orientacoes" value="Sim"> Sim</label>
                        <label><input type="radio" name="compromisso_orientacoes" value="Não"> Não</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="data-termo">Data:</label>
                    <input type="date" id="data-termo" name="data_termo" required>
                </div>

                <div class="form-group">
                    <label for="assinatura">Assinatura do Paciente:</label>
                    <input type="text" id="assinatura" name="assinatura" required
                        placeholder="Digite seu nome completo">
                </div>
                <p>Estou ciente e de acordo com todas as informações acima relacionadas.</p>
                <br>
                <div class="form-group">
                    <label for="termo-concordo">
                        <input type="checkbox" id="termo-concordo" name="termo_concordo" required>
                        Declaro que li e concordo com as informações acima
                    </label>
                </div>
            </div>

            <button type="submit" class="submit-btn">Enviar Formulário</button>
        </form>
    </div>

    <footer>
        <p>&copy; 2024 Fada dos Cílios. Todos os direitos reservados.</p>
        <div class="social-links">
            <a href="#" aria-label="Facebook">Facebook</a> |
            <a href="#" aria-label="Instagram">Instagram</a> |
            <a href="#" aria-label="WhatsApp">WhatsApp</a>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        function formatCpf(cpfInput) {
            let value = cpfInput.value.replace(/\D/g, "");
            value = value.replace(/(\d{3})(\d)/, "$1.$2");
            value = value.replace(/(\d{3})(\d)/, "$1.$2");
            value = value.replace(/(\d{3})(\d{2})$/, "$1-$2");
            cpfInput.value = value;
        }

        function formatPhone(telefoneInput) {
            let value = telefoneInput.value.replace(/\D/g, "");
            value = value.replace(/(\d{2})(\d)/, "($1) $2");
            value = value.replace(/(\d{5})(\d)/, "$1-$2");
            telefoneInput.value = value;
        }

        function showSuccessPopup() {
            alert("Formulário enviado com sucesso!");
        }

        function checkCpfExists(cpf) {
            return localStorage.getItem(cpf) !== null;
        }

        function fillFormWithData(cpf) {
            const userData = JSON.parse(localStorage.getItem(cpf));
            document.getElementById("paciente").value = userData.paciente;
            document.getElementById("profissao").value = userData.profissao;
            document.getElementById("data-nascimento").value = userData.dataNascimento;
            document.getElementById("telefone").value = userData.telefone;
            document.getElementById("email").value = userData.email;
            document.getElementById("endereco").value = userData.endereco;
            document.getElementById("cidade").value = userData.cidade;
        }

        function saveFormData() {
            const formData = {
            paciente: document.getElementById("paciente").value,
            profissao: document.getElementById("profissao").value,
            dataNascimento: document.getElementById("data-nascimento").value,
            telefone: document.getElementById("telefone").value,
            email: document.getElementById("email").value,
            endereco: document.getElementById("endereco").value,
            cidade: document.getElementById("cidade").value,
            indicadoPor: document.getElementById("indicado-por").value, // Novo campo
            sexo: document.querySelector('input[name="sexo"]:checked')?.value // Seleção de rádio
            };
            localStorage.setItem(document.getElementById("cpf").value.replace(/\D/g, ""), JSON.stringify(formData));
        }

        function handleFormSubmit() {
            const cpfInput = document.getElementById("cpf").value.replace(/\D/g, "");
            if (!checkCpfExists(cpfInput)) {
                saveFormData();
            }
            showSuccessPopup();
            document.getElementById("form").submit();
        }

        function handleCpfBlur() {
            const cpfValue = document.getElementById("cpf").value.replace(/\D/g, "");
            if (checkCpfExists(cpfValue)) {
                alert("Este CPF já foi registrado. Os dados serão preenchidos automaticamente.");
                fillFormWithData(cpfValue);
            }
        }

        // Chamadas diretas das funções
        window.onload = function () {
            const cpfInput = document.getElementById("cpf");
            const telefoneInput = document.getElementById("telefone");
            cpfInput.oninput = () => formatCpf(cpfInput);
            telefoneInput.oninput = () => formatPhone(telefoneInput);

            const cpfValue = cpfInput.value.replace(/\D/g, "");
            if (checkCpfExists(cpfValue)) {
                fillFormWithData(cpfValue);
            }

            // Submissão do formulário
            const form = document.getElementById("form");
            form.onsubmit = function (e) {
                e.preventDefault();
                handleFormSubmit();
            };

            // Verificação do CPF no campo blur
            cpfInput.onblur = handleCpfBlur;
        };
    </script>

</body>

</html>